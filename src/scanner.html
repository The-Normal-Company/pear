<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.jsdelivr.net/npm/scandit-sdk@5.x"></script>

    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
    <!-- Your CSS Here -->
</head>
<body>
    <!-- Your HTML Here -->
    <div id="scandit-barcode-picker"></div>
    <script>
        window.onload = function() {
            let barcodePicker;

            // Check camera permission
            navigator.permissions.query({name:'camera'}).then(function(result) {
                if (result.state == 'granted') {
                    // permission granted, continue with scanner setup
                    initScanner();
                } else if (result.state == 'prompt') {
                    // permission prompt, you might want to show a user-friendly message here
                    alert("Please allow camera permission to use the barcode scanner.");
                } else if (result.state == 'denied') {
                    // permission denied
                    alert("Camera permission was denied. The barcode scanner cannot be used.");
                } 
            }).catch((error) => {
                console.error("Error checking camera permission: ", error);
            });

            function initScanner() {
                ScanditSDK.configure('YourScanditSDKKey', {
                    engineLocation: 'https://cdn.jsdelivr.net/npm/scandit-sdk@5.x/build/'
                })
                .then(() => {
                    return ScanditSDK.BarcodePicker.create(document.getElementById('scandit-barcode-picker'));
                })
                .then((picker) => {
                    barcodePicker = picker;
                    
                    var scanSettings = new ScanditSDK.ScanSettings({
                        enabledSymbologies: ["ean8", "ean13", "upca", "upce", "code128", "code39", "code93", "itf", "qr", "databar", "databar-expanded", "codabar"],
                        codeDuplicateFilter: 1000
                    });

                    barcodePicker.applyScanSettings(scanSettings);

                    barcodePicker.on("scan", function(scanResult) {
                        console.log(scanResult.barcodes.reduce(function(string, barcode) {
                            return string + ScanditSDK.Barcode.Symbology.toHumanizedName(barcode.symbology) + ": " + barcode.data + "\n";
                        }, ""));
                    });

                    barcodePicker.startScanning();
                })
                .catch((error) => {
                    console.error(error);
                });
            }
        };
    </script>
</body>
</html>





