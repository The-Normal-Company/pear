<!DOCTYPE html>
<html>
<head>
    <title>Scandit Barcode Scanner</title>
    <script async src="https://ga.jspm.io/npm:es-module-shims@1.5.8/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "scandit-web-datacapture-core": "https://cdn.jsdelivr.net/npm/scandit-web-datacapture-core@6.15.0/build/js/index.js",
          "scandit-web-datacapture-barcode": "https://cdn.jsdelivr.net/npm/scandit-web-datacapture-barcode@6.15.0/build/js/index.js"
        }
      }
    </script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }
        #scandit-barcode-picker {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="scandit-barcode-picker"></div>

    <script type="module">
        import { BarcodeCapture, BarcodeCaptureSettings, SymbologySettings, Barcode } from "scandit-web-datacapture-barcode";
        import { DataCaptureContext, Camera, VideoResolution, CameraSettings } from "scandit-web-datacapture-core";

        (async () => {
            const context = DataCaptureContext.forLicenseKey('YOUR_LICENSE_KEY_HERE');

            const settings = new BarcodeCaptureSettings();
            settings.enableSymbologies([Barcode.Symbology.QR]);
            settings.codeDuplicateFilter = 500;

            const cameraSettings = new CameraSettings();
            cameraSettings.preferredResolution = VideoResolution.Auto;

            const barcodeCapture = BarcodeCapture.forContext(context, settings);

            barcodeCapture.isEnabled = true;

            barcodeCapture.addListener({
                didScan: (barcodeCapture, session, frameData) => {
                    session.newlyRecognizedBarcodes.forEach(barcode => {
                        console.log(`Scanned: ${barcode.symbology}, ${barcode.data}`);
                    });
                }
            });

            Camera.default?.switchToDesiredState(FrameSourceState.On);

            const camera = Camera.default;
            if (camera) {
                camera.applySettings(cameraSettings);
                context.setFrameSource(camera);
                camera.switchToDesiredState(FrameSourceState.On);
            } else {
                console.error('No camera found.');
            }
        })();
    </script>
</body>
</html>

